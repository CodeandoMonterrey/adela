.container
  .card
    %h3.title Planea
    %h5.subtitle Inventario de datos
    %ul.list
      %li.item
        .index 3
        %span Sube el inventario de datos
    = form_for @inventory do |f|
      .form-group
        %label.block Selecciona el archivo *
        .file_input
          = f.file_field :spreadsheet_file
        - unless @inventory.errors
          %span.danger El archivo seleccionado no es v&aacute;lido.
      .form-group
        %button.btn.btn-primary{ type: 'submit' } Subir inventario
        - if @inventory.valid?
          %span.primary &nbsp;&nbsp;&nbsp;&nbsp;Archivo enviado
      %p * Campos obligatorios
    - if @inventory.valid_rows?
      .card.padding-top.bg--grey
        %p Se realizar&aacute; la siguiente actividad
        %p.primary.boldish Publicaci&oacute;n del inventario institucional de Datos de #{current_organization.title}
        = link_to 'Aceptar', publish_inventory_path(@inventory), { class: 'btn btn-primary' }
    - unless @inventory.valid_rows?
      %p.danger Se encontraron las siguientes observaciones en el archivo de Inventario de Datos:
      %ul.list__warnings
        - @inventory.rows.each do |row|
          - unless row.valid?
            - row.errors.messages.keys.each do |key|
              - row.errors.messages[key].uniq.each do |error|
                %li.item
                  .index Rengl&oacute;n #{row.number}
                  %span= error
